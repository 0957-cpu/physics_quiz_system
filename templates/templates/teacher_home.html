{% extends "base.html" %}
{% block content %}

  <h2>ğŸ“ è€å¸«å°ˆç”¨é¦–é  â€” å…¨ç­æ’è¡Œæ¦œ</h2>
  <p>æ‚¨å¥½ï¼Œ{{ teacher_name }}ï¼é€™è£¡æ˜¯å…¨ç­æˆç¸¾ç¸½è¦½ã€‚</p>

  <!-- æ¦‚æ³çµ±è¨ˆ -->
  <div style="display: flex; flex-wrap: wrap; gap: 10px; margin: 14px 0;">
    <div style="flex: 1 1 160px; min-width: 160px; padding: 10px; border-radius: 8px; border: 1px solid #ddd;">
      <div style="font-size: 0.9em; color: #555;">å­¸ç”Ÿäººæ•¸</div>
      <div style="font-size: 1.4em; font-weight: bold;">{{ total_students or 0 }}</div>
    </div>
    <div style="flex: 1 1 160px; min-width: 160px; padding: 10px; border-radius: 8px; border: 1px solid #ddd;">
      <div style="font-size: 0.9em; color: #555;">å¹³å‡ç©åˆ†</div>
      <div style="font-size: 1.4em; font-weight: bold;">
        {% if avg_points is not none %}{{ avg_points }}{% else %}â€”{% endif %}
      </div>
    </div>
    <div style="flex: 1 1 160px; min-width: 160px; padding: 10px; border-radius: 8px; border: 1px solid #ddd;">
      <div style="font-size: 0.9em; color: #555;">æœ€é«˜ç©åˆ†</div>
      <div style="font-size: 1.4em; font-weight: bold;">
        {% if max_points is not none %}{{ max_points }}{% else %}â€”{% endif %}
      </div>
    </div>
  </div>

  <!-- å…¨ç­æ’è¡Œæ¦œ -->
  <div style="margin-top: 10px;">
    <h3>ğŸ† å…¨ç­ç©åˆ†æ’å</h3>

    {% if not students %}
      <p>ç›®å‰å°šç„¡å­¸ç”Ÿè³‡æ–™æˆ– users.xlsx é‚„æ²’å»ºå¥½ã€‚</p>
    {% else %}
      <table border="0" cellspacing="0" cellpadding="6"
             style="border-collapse: collapse; width: 100%; font-size: 0.95em;">
        <thead>
          <tr style="border-bottom: 2px solid #ccc;">
            <th align="left">åæ¬¡</th>
            <th align="left">å§“å</th>
            <th align="left">å¸³è™Ÿ</th>
            <th align="left">ç´¯ç©ç©åˆ†</th>
          </tr>
        </thead>
        <tbody>
          {% for s in students %}
            {% set rank = s.rank %}
            {% if rank == 1 %}
              {% set bg = "#fff7d6" %}
            {% elif rank == 2 %}
              {% set bg = "#f0f4ff" %}
            {% elif rank == 3 %}
              {% set bg = "#e6fff0" %}
            {% else %}
              {% set bg = "#ffffff" %}
            {% endif %}
            <tr style="border-bottom: 1px solid #eee; background-color: {{ bg }};">
              <td>{{ s.rank }}</td>
              <td>{{ s.name }}</td>
              <td>{{ s.account }}</td>
              <td>{{ s.total_points }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% endif %}
  </div>

  <!-- å¿«é€Ÿæ“ä½œ -->
  <div style="margin-top: 18px;">
    <h3>ğŸ§° è€å¸«å¿«æ·åŠŸèƒ½</h3>
    <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-top: 8px;">
      <a href="{{ url_for('home') }}">
        <button type="button" style="padding: 8px 14px;">ğŸ  å›å­¸ç”Ÿé¦–é ï¼ˆé è¦½å­¸ç”Ÿä»‹é¢ï¼‰</button>
      </a>
      <a href="{{ url_for('settings_page') }}">
        <button type="button" style="padding: 8px 14px;">âš™ï¸ é¡Œæ•¸ / å€’æ•¸ / æ¨¡å¼è¨­å®š</button>
      </a>
      <a href="{{ url_for('points') }}">
        <button type="button" style="padding: 8px 14px;">ğŸ“„ å…¨ç­ä½œç­”ç´€éŒ„ï¼ˆGoogle / Excelï¼‰</button>
      </a>
    </div>
  </div>

{% endblock %}
